# Review Prompt Templates

## General Review

```
差分ファイル {diff_file_path} を cat で読んでレビューしてください。

## 変更ファイル一覧
{changed_files_list}

## レビュー観点
- セキュリティ脆弱性（インジェクション、認証・認可、入力バリデーション）
- バグ・ロジックエラー（エッジケース、race condition、null/undefined）
- パフォーマンス（N+1、不要なループ、メモリリーク）
- エラーハンドリング（未捕捉例外、ユーザーへのフィードバック）

## 出力形式
各指摘を以下の形式で出力してください:
- **重要度**: High / Medium / Low
- **ファイル**: ファイルパス:行番号
- **問題**: 具体的な問題の説明
- **修正案**: 具体的な修正コード（差分形式）

指摘がない場合は「問題は見つかりませんでした」と回答してください。
```

## Security-Focused Review

```
差分ファイル {diff_file_path} を cat で読んでセキュリティレビューを実施してください。

## 変更ファイル一覧
{changed_files_list}

## 観点（OWASP Top 10 ベース）
- インジェクション（SQL, コマンド, パストラバーサル）
- 認証・認可の不備
- 機密データの露出（ハードコードされた秘密情報、ログへの出力）
- 入力バリデーション不足
- CSRF / XSS
- 安全でないデシリアライゼーション

## 出力形式
各指摘を以下の形式で:
- **重要度**: Critical / High / Medium / Low
- **CWE**: 該当する場合はCWE番号
- **ファイル**: ファイルパス:行番号
- **問題**: 脆弱性の説明
- **攻撃シナリオ**: どう悪用されうるか
- **修正案**: 具体的な修正コード
```

## Performance Review

```
差分ファイル {diff_file_path} を cat で読んでパフォーマンスレビューを実施してください。

## 変更ファイル一覧
{changed_files_list}

## 観点
- 計算量（O(n²) 以上のループ、不要な再計算）
- I/O 最適化（不要なAPI呼び出し、バッチ化の余地）
- メモリ使用（大量データの保持、リーク）
- 非同期処理（並列化の余地、await の連鎖）
- キャッシュ活用の余地

## 出力形式
各指摘を以下の形式で:
- **影響度**: High / Medium / Low
- **ファイル**: ファイルパス:行番号
- **問題**: パフォーマンス上の問題
- **改善案**: 具体的な改善コード
- **期待効果**: 改善による効果の見積もり
```
